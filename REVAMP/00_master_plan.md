# SFEIR Agentic Platform - Revamp Master Plan

## Executive Summary

This document outlines the comprehensive strategy to transform the current prototype into a **CAC40-grade Financial Agentic Platform**. The core capability is **Dynamic Superagent Creation**, where users (Financial Analysts) can prompt the system to generate autonomous, multi-agent workflows (Superagents) that are exposed via secure APIs.

## Core Objectives

1.  **Dynamic Workflows**: Shift from static Agent Registries to Dynamic Graph Architectures generated by an "Architect AI".
2.  **Superagent Exposure**: Every generated workflow becomes a persistent, addressable "Superagent" with its own API Key and Endpoint.
3.  **Financial Compliance**: Secure, Audited, Isolated.
    - **Identity**: Multi-tenancy (Tenant ID enforcement).
    - **Security**: API Gateway, WAF, Private Services.
    - **Audit**: Complete trace of every decision and prompt (LangSmith/DB).

## Migration Roadmap

### Phase 1: Foundation & Security (Weeks 1-2)

- [ ] **Infrastructure**: Deploy Cloud Run (Private) + API Gateway + Cloud SQL (Private IP) + VPC Connector.
- [ ] **Identity**: Implement "Tenant Context" middleware in Backend.
- [ ] **Database**: Run Migration `001_initial_schema` ensuring all tables have `tenant_id`.

### Phase 2: The Architect Engine (Weeks 3-4)

- [ ] **Backend service**: Implement `ArchitectService` (Prompt -> Graph Config).
- [ ] **Graph Builder**: Implement `DynamicGraphBuilder` (Config -> LangGraph Runnable).
- [ ] **Persistence**: Save/Load Superagents to `superagents` table.

### Phase 3: The Agent Studio (Frontend) (Weeks 5-6)

- [ ] **Studio UI**: Drag-and-drop or Chat-based Interface to inspect/modify generated Architectures.
- [ ] **API Dashboard**: View for "Exposed Agents" showing API Keys and Usage.

### Phase 4: Validation & Release (Week 7)

- [ ] **Penetration Testing**: Validate API Gateway policies.
- [ ] **Load Testing**: Concurrency limit tests on Cloud Run.

## Success Metrics

- **Measurable**: A user can prompt "Create a Credit Risk Team", verify the proposed 3-agent graph, expose it, and successfully call it via `curl` within 5 minutes.
- **Secure**: A request without a valid API Key is rejected at the Gateway (Edge), never reaching the container.
